<Window x:Class="ManagementFile.App.Views.LogInOut.ChangePasswordView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ManagementFile.App.Views.LogInOut"
        mc:Ignorable="d"
        Title="Đổi mật khẩu" 
        Height="450" 
        Width="450"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="Đổi mật khẩu" 
                     FontSize="24"
                     FontWeight="Bold"
                     Foreground="#333333"/>
            <TextBlock Text="Vui lòng nhập mật khẩu hiện tại và mật khẩu mới" 
                     FontSize="12"
                     Foreground="#666666"
                     Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Form -->
        <StackPanel Grid.Row="1">
            <!-- Current Password -->
            <TextBlock Text="Mật khẩu hiện tại" 
                     Margin="0,0,0,5"
                     Foreground="#333333"/>
            <PasswordBox x:Name="CurrentPasswordBox"
                       Height="40"
                       Padding="10"
                       Margin="0,0,0,15"
                       PasswordChanged="CurrentPasswordBox_PasswordChanged"/>

            <!-- New Password -->
            <TextBlock Text="Mật khẩu mới" 
                     Margin="0,0,0,5"
                     Foreground="#333333"/>
            <PasswordBox x:Name="NewPasswordBox"
                       Height="40"
                       Padding="10"
                       Margin="0,0,0,15"
                       PasswordChanged="NewPasswordBox_PasswordChanged"/>

            <!-- Confirm Password -->
            <TextBlock Text="Xác nhận mật khẩu mới" 
                     Margin="0,0,0,5"
                     Foreground="#333333"/>
            <PasswordBox x:Name="ConfirmPasswordBox"
                       Height="40"
                       Padding="10"
                       PasswordChanged="ConfirmPasswordBox_PasswordChanged"/>
        </StackPanel>

        <!-- Error Message -->
        <TextBlock Grid.Row="2"
                 Text="{Binding ErrorMessage}"
                 Foreground="Red"
                 FontSize="12"
                 Margin="0,10,0,0"
                 TextWrapping="Wrap"
                 Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}"/>

        <!-- Buttons -->
        <StackPanel Grid.Row="3" 
                   Orientation="Horizontal" 
                   HorizontalAlignment="Right"
                   Margin="0,20,0,0">
            <Button Content="Hủy"
                   Width="100"
                   Height="40"
                   Margin="0,0,10,0"
                   Command="{Binding CancelCommand}"
                   IsEnabled="{Binding IsProcessing, Converter={StaticResource InverseBooleanConverter}}"/>

            <Button Content="Đổi mật khẩu"
                   Width="120"
                   Height="40"
                   Background="#2196F3"
                   Foreground="White"
                   Command="{Binding ChangePasswordCommand}"
                   IsEnabled="{Binding IsProcessing, Converter={StaticResource InverseBooleanConverter}}"/>
        </StackPanel>

        <!-- Loading Overlay -->
        <Grid Grid.Row="0" 
              Grid.RowSpan="4"
              Background="#80000000"
              Visibility="{Binding IsProcessing, Converter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel HorizontalAlignment="Center" 
                       VerticalAlignment="Center">
                <TextBlock Text="Đang xử lý..."
                         Foreground="White"
                         FontSize="16"
                         HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
